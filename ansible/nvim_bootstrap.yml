# vim: ft=yaml.ansible

- name: Bootstrap Neovim setup
  hosts: localhost
  connection: local
  vars_files:
    - vars/main.yml
  tasks:
    - name: Ensure Neovim state directories exist
      ansible.builtin.file:
        path: "{{ (state_dir, 'nvim', item) | path_join }}"
        state: directory
        owner: zeroknight
        group: zeroknight
        mode: '0750'
      loop:
        - session
        - shada
        - swap
        - undo
        - view

    - name: Ensure Neovim site directory exists
      ansible.builtin.file:
        path: "{{ (data_dir, 'nvim', 'site') | path_join }}"
        state: directory
        owner: zeroknight
        group: zeroknight
        mode: '0755'

    - name: Import nvim role
      ansible.builtin.import_role:
        name: nvim
